<%= form_for @course, html: { class: 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label "Give it an awesome name", class: 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, class: 'text_field span6',
          placeholder: "eg: Maths Universe, Geovengers" %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label "Give it an awesome backstory", :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :description, class: 'text_area span6', rows: '10',
          placeholder: "eg: Darth Vader is taking over the universe. We need you to save the day!" %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label "Course Logo", class: 'control-label' %>
    <div class="controls">
      <img src="<%= @course.logo_url %>" class="course-logo-target-preview" alt="Logo Preview" />
      <%= f.hidden_field :logo_url, class: "course-logo-target-input" %>
      <br/>
      <a href="#image-uploader-modal"
          class="image-uploader-trigger"
          data-target=".course-logo-target"
          data-toggle="modal">Upload new logo</a>
    </div>
  </div>

  <hr/>
  <h1>Customize Theme</h1>
  <% @course_atts.each do |ca| %>
    <div class="control-group">
      <label><%= ca.theme_attribute.name %></label>
      <div class="controls">
        <% case ca.theme_attribute.value_type
        when "color" %>
          <div class="input-append color colorpicker" data-color="rgb(255, 146, 180)" data-color-format="hex" id="cp3">
            <input type="text" class="span2" name="course_atts[<%= ca.id %>]" value="<%= ca.value %>" />
            <span class="add-on"><i style="background-color: <%= ca.value %>;"></i></span>
          </div>
        <% when "image" %>
          <img src="<%= ca.value %>" alt="Preview"
              class="theme-attribute-<%= ca.theme_attribute.id %>-target-preview" />
          <input type="hidden" name="course_atts[<%= ca.id %>]"
              class="theme-attribute-<%= ca.theme_attribute.id %>-target-input"
              value="<%= ca.value %>" />
          <br/>
          <a href="#image-uploader-modal"
              class="image-uploader-trigger"
              data-target=".theme-attribute-<%= ca.theme_attribute.id %>-target"
              data-toggle="modal">Upload image</a>
        <% else %>
          <input type="text" class="span2" name="course_atts[<%= ca.id %>]" value="<%= ca.value %>">
        <% end %>
      </div>
    </div>
  <% end %>
  <div class="form-actions">
    <%= f.submit nil, class: 'btn btn-primary' %>
    <%= link_to t('.cancel', default: t("helpers.links.cancel")),
                courses_path, class: 'btn' %>
  </div>
<% end %>

<%= render partial: "layouts/image_uploader",
      locals: { upload_to: course_file_uploads_path(@course),
                container_class: '',
                image_url_class: '' } %>
